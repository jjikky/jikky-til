## 날짜: 2024-07-20

## 공부한 내용

### 주제 1: HTTP 상태코드의 전달

<aside>
❓ 응답에 상태코드를 전달했는데, response body에도 동일한 상태코드를 전달하는 것은 비효율적인 것 같은데, 타 수강생들 혹은 구글링해서 나오는 api docs를 보면 body에 상태코드가 포함되는 경우가 있어서 혼란스럽다.

</aside>

### http status code

- **http status code 는 고수준이다**
    - 고수준으로 만들어졌기 때문에 세부정보를 담고 있지 않다.
    - "요청 자체가 어떠한가"에 대한 "상태값"만 담고 있으므로 고수준으로 표현
- http status code는 요청을 보낸 client측에서 서버의 응답을 어떻게 핸들링 할지 빠르게 판단하는데 쓰이는 표준이다.
- http status code는 "http 요청 자체"가 어떻게 처리 되었는지에만 관심사를 가진다
    - 이걸 response와 엮어서 쓸지 말지 결정하는 것은 순수하게 **API를 설계하는 개발자의 마음**이다.

### response body에 http status code를 담는 것은 restful 하지 못한가?

- restful 하다는 것은 요청과 응답만으로 해당 endpoint 에 대한 설명이 가능하다는 된다는 의미
- response body에 http status code를 담는 것이 잘못된 것은 아니지만, 이미 표준을 따라서 응답이 어떤 상태인지를 알리고 있기 때문에, **굳이 중복해서 보내주는 것**이 된다.

### 그렇다면 body에 상태코드를 넣는 것을 지양해야 하는가?

경우에 따라서 다르다고 생각한다. ( 필요하다면 넣어도 상관 없다는 것 )

아래와 같은 경우가 있을 수 있다.

- 구글과 카카오 같이 큰 서비스를 운영하는 곳은 400이라는 http status code 만으로는 모든 에러를 설명할 수 없다.
    - http status code 400 (bad request) 라는 고수준의 설명에 세부적인 설명이 필요 할 수 있다.
    - [구글 400 에러 링크](https://translate.googleapis.com/language/translate/v2?key=invalid&q=hello&source=en&target=es&format=text&$.xgafv=2) : **이 링크에 포함된 메세지를 보시면 self-descriptive 하다는 것을 눈치챌 수 있다.**
    - [카카오 api의 에러코드](https://developers.kakao.com/docs/latest/ko/rest-api/reference) : 카카오 api 문서를 살펴보면, 서비스에서 자체적으로 정의한 에러 코드가 있고, 이것을 response body에 전달함으로써 상세한 에러 정보를 나타내고 있다. (api docs에 해당 에러코드에 대한 설명을 기재)
- 이러한 방식으로 restful한 설계를 할 수 있다.
    
    

## 오늘의 이슈와 해결 방법

### 이슈 1 : 클라이언트 ip 가져오기

- 상황
    - 특정 ip의 분당 api요청을 제한하기 위해 x-forwarded-for 헤더를 통해 ip를 가져오는 중에, 배포환경에서 여러개의 ip가 찍히는 것을 발
- 원인
    - 요청이 프록시 서버나 로드밸런서를 통해 전달된다면 x-forwarded-for 헤더에 여러 ip가 찍혀있다.
    - 첫 번째 IP는 원래 클라이언트의 IP이며, 그 뒤에는 요청이 거친 프록시 서버의 IP가 나열됨
- 해결
    - x-forwarded-for 헤더에 여러 ip가 찍힐 수 있으므로 첫번째 ip만 가져오게 함
        
        ```java
        const ip = req.req.headers['x-forwarded-for']
                    ? req.headers['x-forwarded-for'].split(',')[0].trim()
                    : req.connection.remoteAddress;
        ```
        

## 오늘의 작업

### 목록

- 머라카노 이슈 수정
- http status code를 response body에 담는것에 대한  고민
- 머라카노 데이터 추가
- 자기소개서 작성

### 작업시간
![image](https://github.com/user-attachments/assets/a64f945f-340d-4eeb-8291-f6a52e0b47e0)


## 오늘의 회고

- 자기소개서를 작성하면서 지금까지의 시간을 되돌아 보았다.
- 대학교에 입학하고부터 지금까지 7년 4개월이라는 시간이 흘렀고, 웹개발을 처음 접하고 지금까지는 3년 7개월이라는 시간이 흘렀다. 군대가 끼어있긴 하지만 개발을 접한 시간에 비해서 실력이 많이 부족하다고 생각하고 흘려보낸 시간이 많이 후회가 된다. 화도 나지만 지금 할 수 있는것은 분한만큼 노력하는 것 뿐..
    - 정확히는 두번의 인턴과 창업경진대회를 진행했던 약 1년은 정말 치열하게 살았던 것 같고, 나머지 시간은 그렇지 못했다.
- 카카오 테크 부트캠프에 속해있는 4월부터 현재까지의 시간은 대부분의 시간을 개발을 위해 보냈다. 누군가 최선을 다했냐고 물어본다면 그건 아닌것 같다. 처음 과정을 진행 할 때 최선을 다하자고 결심했는데, 후회가 남는것을 보면 말이다.
6월 부터는 대부분 하루 11시간~15시간 정도의 시간을 투자했다. 더 많은 시간을 쏟으니 오히려 더 개발이 즐거워지는 것을 느꼇다. 오전 9시에 시작해서 정신을 차리는 시점에는 새벽2시가 넘어있다. 
내가 개발에 집중 할 수 있는 것은 좋은 강사님들과  같이 열심히 하는 분위기를 형성해주고 늘 새벽까지 남아있는 동료들 덕분이라는 것을 알고 무척 감사하다. 모두가 원하는 목표를 이루기 위해 자신감을 가지고 끝까지 힘을 내줬으면 한다.
이번 겨울, 눈물을 흘리지 않으려면 절대 안주하지 않고 더 노력해야만 한다.
- 이제 곧 제주도에서 약 70일의 시간동안 파이널 프로젝트가 진행될 것이다. 지금까지의 과정은 이것을 위한 준비 운동이 아니었을까. 그곳에서는 삶을 온전히 성장을 초점에 두고 달려나가야 한다.
- 이전과 다른 삶을 살고자 한다면, 지금까지 한 번도 해본 적 없는 노력을 하자
    
    ```
    엘리스가 물었다.
    '우리는 계속 같은 자리에 있는 건가요?'
    '아무리 뛰어도 똑같은 자리 같아요.'
    ```
    
    ```
    그러자 여왕이 어이가 없다는 듯 말했다.
    '당연하지. 그럼 도대체 무슨 일이 있을 거라고 기대한 거니?'
    
    여왕은 말했다.
    '이곳에선 같은 자리에 머물기 위해서 쉬지않고 달리는 수 밖에 없어.'
    '다른 곳으로 가려면 최소한 그 두배의 속도로 달려야지.'
    
    엘리스는 생각했다.
    이건 꿈이 분명하다고...
    
    자신의 꿈이 아니라면 적어도 다른 이의 꿈이기라도 할 것이라고...
    ```
